<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>上传图片到微博</title>
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
</head>
<body>
<form action="http://picupload.service.weibo.com/interface/pic_upload.php?s=rdxt&app=miniblog&cb=http://photo.weibo.com/upload/simple_upload/pic/1" name="commUploadForm1" method="POST" enctype="multipart/form-data" id="form" style="display:none;">
    <input name="pic1" size="41" class="ipt_fl" id="file" accept="image/*" type="file">
</form>
<div class="container" style="margin-top: 150px;">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <div class="input-group">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button">
                        <span class="glyphicon glyphicon-file"/></span>
                    </button>
                </span>
                <input type="text" class="form-control" placeholder="没有选择文件">
                <span class="input-group-btn">
                  <button class="btn btn-primary" type="button">
                    <span class="glyphicon glyphicon-upload"/></span>
                  上传</button>
                </span>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var choseFile1 = document.querySelector('.btn.btn-default');
    var choseFile2 = document.querySelector('input[type="text"]');
    var file = document.querySelector('input[type="file"]');
    var upload = document.querySelector('.btn.btn-primary');
    var form = document.querySelector('form');
    choseFile2.onclick = choseFile1.onclick = function() {
        file.click();
    };
    upload.onclick = function(){
        form.submit();
    };
    file.onchange=function(){
        choseFile2.value=file.files[0].name;
    }
</script>
</body>
</html>
